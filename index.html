<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="">
	<meta name="author" content="">
	<link rel="shortcut icon" href="img/favicon.png">

	<title>exense-visualization</title>
	<script src="bower_components/jquery/dist/jquery.js"></script>
	<script src="bower_components/angular/angular.js"></script>
	<script src="bower_components/d3/d3.js"></script>
	<script src="bower_components/nvd3/build/nv.d3.js"></script>
	<script src="bower_components/angular-nvd3/dist/angular-nvd3.js"></script>
	<script src="bower_components/angular-bootstrap/ui-bootstrap-tpls.js"></script>
	<script src="bower_components/bootstrap/dist/js/bootstrap.min.js"></script>

	<script src="src/js/dist-settings-dev.js"></script>
	<script src="src/js/core-classes.js"></script>
	<script src="src/js/object-defaults.js"></script>
	<script src="src/js/global-functions.js"></script>
	<script src="src/js/id-index-array.js"></script>
	<script src="src/js/dashletcomssrv.js"></script>
	<script src="src/js/rtm-controls.js"></script>
	<script src="src/js/key-val-collection.js"></script>
	<script src="src/js/viz-query.js"></script>
	<script src="src/js/viz-dashlet.js"></script>
	<script src="src/js/viz-mgd-widget.js"></script>
	<script src="src/js/viz-dashboard.js"></script>
	<script src="src/js/viz-dashboard-manager.js"></script>

	<script src="static-presets.js"></script>

	<link rel="stylesheet" href="bower_components/nvd3/build/nv.d3.min.css">
	<link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap-theme.css">
	<link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.css">

	<link rel="stylesheet" href="src/css/key-val-collection.css">
	<link rel="stylesheet" href="src/css/viz-dashlet.css">
	<link rel="stylesheet" href="src/css/viz-mgd-widget.css">
	<link rel="stylesheet" href="src/css/viz-dashboard.css">

	<script>
		var initTestDashboard = false;
		var demoApp = angular.module('demoApp', ['viz-dashboard-manager', 'dashletcomssrv'])
			.controller('ctrl', ['$scope', function ($scope) {
				$scope.staticPresetsInstance = new StaticPresets();
				$scope.dashboardsendpoint = [];

				$scope.$on('top.dashboard-new', function () {
					$scope.$broadcast('dashboard-new');
				});
				$scope.$on('top.dashboard-clear', function () {
					$scope.$broadcast('dashboard-clear');
				});

				$scope.$on('top.dashboard-current-addWidget', function () {
					$scope.$broadcast('dashboard-current-addWidget');
				});
				$scope.$on('top.dashboard-current-clearWidgets', function () {
					$scope.$broadcast('dashboard-current-clearWidgets');
				});

				// For saving time in testing
				$scope.$on('manager-ready', function () {
					$scope.$broadcast('dashboard-new');
					$scope.$on('dashboard-ready', function (event, arg) {
						if(!initTestDashboard){
							initTestDashboard = true;
							$scope.$broadcast('dashboard-current-addWidget');
						}
					});
				});
			}]);

	</script>
</head>

<body>
	<div ng-app='demoApp' ng-controller='ctrl'>
		<span><button class="btn btn-primary btn-nav viz-btn-nav" ng-click="$emit('top.dashboard-new')">
				<span class="glyphicon glyphicon-file glyphicon-app"></span>
			</button>
			<button class="btn btn-primary btn-nav viz-btn-nav" ng-click="$emit('top.dashboard-clear')">
				<span class="glyphicon glyphicon-trash glyphicon-app"></span>
			</button>
			<button class="btn btn-primary btn-nav viz-btn-nav" ng-click="$emit('top.dashboard-current-addWidget')">
				<span class="glyphicon glyphicon-plus glyphicon-app"></span>
			</button>
			<button class="btn btn-primary btn-nav viz-btn-nav" ng-click="$emit('top.dashboard-current-clearWidgets')">
				<span class="glyphicon glyphicon-minus glyphicon-app"></span>
			</button>
		</span>
		<viz-dashboard-manager displaymode="'managed'" presets="staticPresetsInstance" dashboards="dashboardsendpoint"></viz-dashboard-manager>
	</div>
</body>

</html>